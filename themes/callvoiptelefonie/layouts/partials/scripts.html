<script src="https://cdnjs.cloudflare.com/ajax/libs/cloudinary-core/2.3.0/cloudinary-core-shrinkwrap.min.js"></script>

<!-- Smartsupp Live Chat script -->

<script type="text/javascript">
	var _smartsupp = _smartsupp || {};
	_smartsupp.key = '6e5be5d089f703e4e2748d4c0e810e7d0beb1ffb';
	_smartsupp.hideWidget = true;
	_smartsupp.writable = true; // text area and send button
	_smartsupp.triggerable = false; // auto-messages
	_smartsupp.soundMuted = true; // sounds for visitors
	_smartsupp.hideBanner = true; // chat bubble
	_smartsupp.alignX = "right";
	_smartsupp.offsetX = -7;
	_smartsupp.widget = "button";

	window.smartsupp || (function (d) {
		var s, c, o = smartsupp = function () { o._.push(arguments) }; o._ = [];
		s = d.getElementsByTagName('script')[0]; c = d.createElement('script');
		c.type = 'text/javascript'; c.charset = 'utf-8'; c.async = true;
		c.src = 'https://www.smartsuppchat.com/loader.js?'; s.parentNode.insertBefore(c, s);
	})(document);
</script>


{{ $icons := resources.Get "js/icons.bundle.js" }}
{{ $main := resources.Get "js/main.js" }}
{{ $js := slice $icons $main | resources.Concat "js/bundle.js" }}

{{ with $js }}
{{ $secureJS := . | resources.Fingerprint }}
<script type="text/javascript" src="{{ $secureJS.Permalink }}" integrity="{{ $secureJS.Data.Integrity }}"
	crossorigin="anonymous" defer></script>
{{ end }}





{{- if eq (getenv "HUGO_ENV") "production" | or (eq $.Site.Params.env "production") -}}
<script>
	if ('serviceWorker' in navigator) {
		navigator.serviceWorker
			.register('/sw.js', { scope: '/' })
			.then(function (registration) {
				console.log('Service Worker Registered');
			});

		navigator.serviceWorker
			.ready
			.then(function (registration) {
				console.log('Service Worker Ready');
			});
	}
</script>
{{ end }}